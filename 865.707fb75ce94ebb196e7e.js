"use strict";(self.webpackChunkLab_aguas_cunoc=self.webpackChunkLab_aguas_cunoc||[]).push([[865],{4865:(E,u,l)=>{l.r(u),l.d(u,{LoteModule:()=>V});var d=l(8583),c=l(9516),a=l(665),e=l(3018),p=l(996),q=l(1841);let _=(()=>{class o extends p.O{constructor(t){super(t),this.http=t,this.url={lote:"lote"}}getLotes(t){return this.get(this.url.lote,t)}getLote(t,r){return this.get(this.url.lote+"/"+t+"/show",r)}storeLote(t){return this.post(this.url.lote,t)}deleteLote(t,r){return this.delete(this.url.lote+"/"+t,r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(q.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=l(9344),T=l(4192),m=l(8295),Z=l(9983),g=l(7539);function h(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e.TgZ(25,"div",48),e.TgZ(26,"button",49),e._UZ(27,"i",50),e.qZA(),e.TgZ(28,"button",51),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().modalEditar(s)}),e._UZ(29,"i",52),e.qZA(),e.TgZ(30,"button",53),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().modalEditar(s)}),e._UZ(31,"i",54),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.no),e.xp6(2),e.Oqu(e.xi3(5,11,t.fecha,"dd-MM-yyyy")),e.xp6(3),e.Oqu(t.remitente),e.xp6(2),e.Oqu(t.cantidad_muestras),e.xp6(2),e.Oqu(t.no_cadena),e.xp6(2),e.Oqu(t.refrigerado?"SI":"NO"),e.xp6(2),e.Oqu(t.tomado_por),e.xp6(2),e.Oqu(t.persona_entrega),e.xp6(2),e.Oqu(t.contacto),e.xp6(2),e.Oqu(t.observaciones),e.xp6(2),e.Oqu(t.proyecto)}}function A(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar n\xfamero del lote"),e.qZA())}function b(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar remitente"),e.qZA())}function v(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar un valor"),e.qZA())}function U(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar una cantidad"),e.qZA())}function x(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar un valor"),e.qZA())}function F(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar valor"),e.qZA())}function y(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar valor"),e.qZA())}function C(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar valor"),e.qZA())}function L(o,n){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Por favor ingresar valor"),e.qZA())}function I(o,n){if(1&o&&(e.TgZ(0,"option",55),e._uU(1),e.qZA()),2&o){const t=n.$implicit,r=e.oxw();e.Q6J("value",t.id)("selected",t.id==r.loteForm.controls.proyecto_id.value),e.xp6(1),e.hij("",t.nombre," ")}}const N=[{path:"index",component:(()=>{class o{constructor(t,r,i,s){this.loteService=t,this.fb=r,this.toastr=i,this.proyectoService=s,this.btn_disabled=!1,this.accion="Nuevo lote",this.lotes=[],this.proyectos=[],this.loteForm=this.fb.group({no:["",a.kI.required],remitente:["",a.kI.required],fecha:["",a.kI.required],boleta:[""],cantidad_muestras:[1,a.kI.required],cadena:[0,a.kI.required],no_cadena:[""],refrigerado:["",a.kI.required],tomado_por:["",a.kI.required],persona_entrega:["",a.kI.required],contacto:["",a.kI.required],observaciones:["",a.kI.required],enabled:[1],proyecto_id:[""],id:["0"]})}ngOnInit(){this.loadLotes()}loadLotes(){this.loteService.getLotes().subscribe(t=>{this.lotes=t.body}),this.proyectoService.getProyectos().subscribe(t=>{this.proyectos=t.body})}modalNuevo(){this.accion="Nuevo lote",this.loteForm.reset(),this.loteForm.controls.enabled.setValue(1),this.loteForm.controls.cantidad_muestras.setValue(1),this.loteForm.controls.cadena.setValue(0)}modalEditar(t){this.accion="Editar lote",this.loteForm.controls.id.setValue(t.id),this.loteForm.controls.proyecto_id.setValue(t.proyecto_id),this.loteForm.controls.no.setValue(t.no),this.loteForm.controls.remitente.setValue(t.remitente),this.loteForm.controls.fecha.setValue(t.fecha),this.loteForm.controls.boleta.setValue(t.boleta),this.loteForm.controls.cantidad_muestras.setValue(t.cantidad_muestras),this.loteForm.controls.cadena.setValue(t.cadena),this.loteForm.controls.no_cadena.setValue(t.no_cadena),this.loteForm.controls.refrigerado.setValue(t.refrigerado),this.loteForm.controls.tomado_por.setValue(t.tomado_por),this.loteForm.controls.persona_entrega.setValue(t.persona_entrega),this.loteForm.controls.contacto.setValue(t.contacto),this.loteForm.controls.observaciones.setValue(t.observaciones),this.loteForm.controls.enabled.setValue(t.enabled)}onSubmit(){this.btn_disabled=!0,this.loteService.storeLote(this.loteForm.value).subscribe(t=>{200==t.status&&(this.toastr.success(t.body.message||"Operaci\xf3n completada","SUCCESS"),this.loadLotes(),setTimeout(()=>{this.btn_disabled=!1},2e3))},t=>{setTimeout(()=>{this.btn_disabled=!1},2e3),this.toastr.error(t.error.message,"ERROR")})}eliminarLote(t){this.loteService.deleteLote(t).subscribe(r=>{200==r.status&&(this.toastr.success(r.body.message||"Operaci\xf3n completada","SUCCESS"),this.loadLotes()),r.success&&(this.toastr.success(r.message||"Operaci\xf3n completada","SUCCESS"),this.loadLotes())},r=>{this.toastr.error(r.error.message,"ERROR")})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_),e.Y36(a.qu),e.Y36(f._W),e.Y36(T.X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-index-lote"]],decls:163,vars:22,consts:[[1,"card"],[1,"card-header","row"],[1,"col-md-11"],[1,""],[1,"col-md-1"],["data-toggle","modal","data-target","#modal-editar",1,"btn","btn-sm","btn-block","btn-primary",3,"click"],[1,"card-body"],[1,"table","table-sm","table-stripped","table-bordered"],[4,"ngFor","ngForOf"],["id","modal-editar",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],["type","hidden","formControlName","id"],[1,"row"],[1,"col-12","mb-1"],[2,"color","red"],[1,"col-md-3","mb-1"],["appearance","outline",1,"field"],["matInput","","type","text","placeholder","","formControlName","no","required","",1,"example-right-align"],[4,"ngIf"],[1,"col-md-5","mb-1"],["matInput","","type","text","placeholder","","formControlName","remitente","required","",1,"example-right-align"],["matInput","","type","date","placeholder","","formControlName","fecha","required","",1,"example-right-align"],[1,"col-md-6","mb-1"],["matInput","","type","text","placeholder","","formControlName","boleta",1,"example-right-align"],["matInput","","type","number","placeholder","","formControlName","cantidad_muestras","required","","min","1",1,"example-right-align"],["matInput","","type","text","placeholder","","formControlName","no_cadena",1,"example-right-align"],["matInput","","type","text","placeholder","","formControlName","tomado_por","required","",1,"example-right-align"],["matInput","","type","text","placeholder","","formControlName","persona_entrega","required","",1,"example-right-align"],["matInput","","type","text","placeholder","","formControlName","contacto","required","",1,"example-right-align"],["matInput","","type","text","placeholder","","formControlName","observaciones","required","",1,"example-right-align"],[1,"form-group"],["formControlName","proyecto_id","required","",1,"form-control"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"col-md-4","mt-3"],["formControlName","refrigerado",1,"example-margin"],[1,"modal-footer","justify-content-between"],["type","button","data-dismiss","modal",1,"btn","btn-default"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","modal-eliminar",1,"modal","fade"],["role","alert",1,"alert","alert-danger"],["type","submit","data-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-info"],[1,"fas","fa-eye"],["type","button","data-toggle","modal","data-target","#modal-editar",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-edit"],["type","button","data-toggle","modal","data-target","#modal-eliminar",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[3,"value","selected"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h5",3),e._uU(4,"Listado de lotes"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return r.modalNuevo()}),e._uU(7," Nuevo "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"table",7),e.TgZ(10,"thead"),e.TgZ(11,"tr"),e.TgZ(12,"th"),e._uU(13,"No"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Fecha"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Remitente"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Muestras"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Cadena"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Refrigerado"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Tomado por"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Persona que entrega"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Contacto"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Observaciones"),e.qZA(),e.TgZ(32,"th"),e._uU(33,"Proyecto"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"tbody"),e.YNc(37,h,32,14,"tr",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",9),e.TgZ(39,"div",10),e.TgZ(40,"div",11),e.TgZ(41,"div",12),e.TgZ(42,"h4",13),e._uU(43),e.qZA(),e.TgZ(44,"button",14),e.TgZ(45,"span",15),e._uU(46,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"form",16),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(48,"div",17),e._UZ(49,"input",18),e.TgZ(50,"div",19),e.TgZ(51,"div",20),e.TgZ(52,"small",21),e._uU(53,"* Campos obligatorios"),e.qZA(),e.qZA(),e._UZ(54,"hr"),e.TgZ(55,"div",22),e.TgZ(56,"mat-form-field",23),e.TgZ(57,"mat-label"),e._uU(58,"No"),e.qZA(),e._UZ(59,"input",24),e.YNc(60,A,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(61,"div",26),e.TgZ(62,"mat-form-field",23),e.TgZ(63,"mat-label"),e._uU(64,"Remitente"),e.qZA(),e._UZ(65,"input",27),e.YNc(66,b,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(67,"div",22),e.TgZ(68,"mat-form-field",23),e.TgZ(69,"mat-label"),e._uU(70,"Fecha"),e.qZA(),e._UZ(71,"input",28),e.YNc(72,v,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(73,"div",29),e.TgZ(74,"mat-form-field",23),e.TgZ(75,"mat-label"),e._uU(76,"Boleta"),e.qZA(),e._UZ(77,"input",30),e.qZA(),e.qZA(),e.TgZ(78,"div",22),e.TgZ(79,"mat-form-field",23),e.TgZ(80,"mat-label"),e._uU(81,"Cant. Muestras"),e.qZA(),e._UZ(82,"input",31),e.YNc(83,U,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(84,"div",29),e.TgZ(85,"mat-form-field",23),e.TgZ(86,"mat-label"),e._uU(87,"Cadena de custodia"),e.qZA(),e._UZ(88,"input",32),e.YNc(89,x,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(90,"div",29),e.TgZ(91,"mat-form-field",23),e.TgZ(92,"mat-label"),e._uU(93,"Tomado por"),e.qZA(),e._UZ(94,"input",33),e.YNc(95,F,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(96,"div",29),e.TgZ(97,"mat-form-field",23),e.TgZ(98,"mat-label"),e._uU(99,"Persona que entrega"),e.qZA(),e._UZ(100,"input",34),e.YNc(101,y,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(102,"div",29),e.TgZ(103,"mat-form-field",23),e.TgZ(104,"mat-label"),e._uU(105,"Cont\xe1cto"),e.qZA(),e._UZ(106,"input",35),e.YNc(107,C,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(108,"div",29),e.TgZ(109,"mat-form-field",23),e.TgZ(110,"mat-label"),e._uU(111,"Observaciones"),e.qZA(),e._UZ(112,"input",36),e.YNc(113,L,2,0,"mat-error",25),e.qZA(),e.qZA(),e.TgZ(114,"div",29),e.TgZ(115,"div",37),e.TgZ(116,"label"),e._uU(117,"Proyectos"),e.qZA(),e.TgZ(118,"select",38),e.YNc(119,I,2,3,"option",39),e.qZA(),e.qZA(),e.qZA(),e.TgZ(120,"div",40),e.TgZ(121,"mat-checkbox",41),e._uU(122,"Refrigerado "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(123,"div",42),e.TgZ(124,"button",43),e._uU(125,"Cerrar"),e.qZA(),e.TgZ(126,"button",44),e._uU(127,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(128,"div",45),e.TgZ(129,"div",10),e.TgZ(130,"div",11),e.TgZ(131,"div",12),e.TgZ(132,"h4",13),e._uU(133,"Eliminar registro"),e.qZA(),e.TgZ(134,"button",14),e.TgZ(135,"span",15),e._uU(136,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(137,"div",17),e.TgZ(138,"div",46),e.TgZ(139,"h3"),e._uU(140,"Est\xe1 seguro de eliminar este lote?"),e.qZA(),e.TgZ(141,"p"),e._uU(142,"No: "),e.TgZ(143,"b"),e._uU(144),e.qZA(),e.qZA(),e.TgZ(145,"p"),e._uU(146,"Fecha: "),e.TgZ(147,"b"),e._uU(148),e.ALo(149,"date"),e.qZA(),e.qZA(),e.TgZ(150,"p"),e._uU(151,"Muestras: "),e.TgZ(152,"b"),e._uU(153),e.qZA(),e.qZA(),e._UZ(154,"hr"),e._UZ(155,"br"),e.TgZ(156,"b"),e._uU(157,"Esta acci\xf3n no se puede deshacer!!"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(158,"div",42),e.TgZ(159,"button",43),e._uU(160,"Cerrar"),e.qZA(),e.TgZ(161,"button",47),e.NdJ("click",function(){return r.eliminarLote(r.loteForm.controls.id.value)}),e._uU(162,"Eliminar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(37),e.Q6J("ngForOf",r.lotes),e.xp6(6),e.Oqu(r.accion),e.xp6(4),e.Udp("font-size",15,"px"),e.Q6J("formGroup",r.loteForm),e.xp6(13),e.Q6J("ngIf",null==r.loteForm.get("no").errors?null:r.loteForm.get("no").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("remitente").errors?null:r.loteForm.get("remitente").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("fecha").errors?null:r.loteForm.get("fecha").errors.required),e.xp6(11),e.Q6J("ngIf",null==r.loteForm.get("cantidad_muestras").errors?null:r.loteForm.get("cantidad_muestras").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("no_cadena").errors?null:r.loteForm.get("no_cadena").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("tomado_por").errors?null:r.loteForm.get("tomado_por").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("persona_entrega").errors?null:r.loteForm.get("persona_entrega").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("contacto").errors?null:r.loteForm.get("contacto").errors.required),e.xp6(6),e.Q6J("ngIf",null==r.loteForm.get("observaciones").errors?null:r.loteForm.get("observaciones").errors.required),e.xp6(6),e.Q6J("ngForOf",r.proyectos),e.xp6(7),e.Q6J("disabled",!r.loteForm.valid||r.btn_disabled),e.xp6(18),e.Oqu(r.loteForm.controls.no.value),e.xp6(4),e.Oqu(e.xi3(149,19,r.loteForm.controls.fecha.value,"dd-MM-yyyy")),e.xp6(5),e.Oqu(r.loteForm.controls.cantidad_muestras.value))},directives:[d.sg,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,m.KE,m.hX,Z.Nt,a.Q7,d.O5,a.wV,a.qQ,a.EJ,g.oG,m.TO,a.YN,a.Kr],pipes:[d.uU],styles:[""]}),o})()},{path:"lote/:id",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ver-lote"]],decls:2,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"ver-lote works!"),e.qZA())},styles:[""]}),o})()},{path:"**",redirectTo:"index"}];let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.Bz.forChild(N)],c.Bz]}),o})();var S=l(7441),J=l(2613);let V=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,O,a.u5,a.UX,Z.c,m.lN,S.LD,J.Fk,g.p9]]}),o})()}}]);